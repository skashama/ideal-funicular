var WPBNewBackupData={},ajaxSafeNamespace="wpbackitup-premium",ENUM={GDRIVE:"GDRIVE",AMAZONS3:"AMAZONS3",DROPBOX:"DROPBOX"},CLOUDSTATUS={READY:"ready",UPLOADING:"uploading",UPLOADED:"uploaded",ERROR:"error"},debugFlag=!1;if(void 0===WPBackItUpSafeLocals)var WPBackItUpSafeLocals=[];var wpbackitup_get_action_name=function(a){return ajaxSafeNamespace+"_"+a},AjaxGetSafe=function(a){return jQuery.ajax({url:ajaxurl,type:"GET",data:{action:wpbackitup_get_action_name(a),security:WPBackItUpSafeLocals[a]},dataType:"json"})},AjaxGetCore=function(a){var e=wpbackitup_local[a];return jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"wp-backitup_"+a,security:e},dataType:"json"})},AjaxPostSafe=function(a,e){return(e=e||{}).action=wpbackitup_get_action_name(a),e.security=WPBackItUpSafeLocals[a],jQuery.ajax({url:ajaxurl,type:"POST",data:e,dataType:"json"})};!function(){"use strict";if(document.querySelector("#wpbackitup-core-backup"))var s=new Vue({el:"#wpbackitup-core-backup",data:{cloudStatus:{},isNewRowAvailable:!1,backupNewRow:{}},methods:{getAvailableBackups:function(){AjaxGetCore("get_available_backups").then(function(a){if(a.success)for(var e=0;e<a.data.length;e++){var t=a.data[e].backup_job_id,i=a.data[e].backup_job_cloud_status;s.$set(s.cloudStatus,t,i)}})},getBackupStatus:function(){var a=WPBNewBackupData;if("success"===a.backupStatus){var e=a.backupName,t=e.lastIndexOf("_"),i=e.substring(t+1);this.isNewRowAvailable=!0,this.backupNewRow={name:a.backupName,type:a.backupRuntype,date:a.backupDate,duration:a.backupDuration,status:a.backupStatus,row:99999,jobId:i,zipExist:!0},WPBNewBackupData={}}}},mounted:function(){this.getAvailableBackups(),this.getBackupStatusInterval=setInterval(function(){0!==Object.keys(WPBNewBackupData).length&&this.getBackupStatus()}.bind(this),1e3),this.getAvailableBackupsInterval=setInterval(function(){this.getAvailableBackups()}.bind(this),3e3)},beforeDestroy:function(){clearInterval(this.getAvailableBackupsInterval),clearInterval(this.getBackupStatusInterval)}})}(jQuery),function(l){var a,e,t="wp-backitup",i=0;u(),r();try{"undefined"!=typeof wpbackitup_plupload_config&&(a=wpbackitup_plupload_config,(e=new plupload.Uploader(a)).init(),e.bind("FilesAdded",function(a,e){plupload.each(e,function(a){l("#filelist").append('<div id="media-item-'+a.id+'" class="media-item child-of-0"><img class="pinkynail" alt="" src="'+site_url+'/wp-includes/images/media/archive.png"><div class="filename new" id="'+a.id+'">'+a.name+" (<span>"+plupload.formatSize(0)+"</span> of "+plupload.formatSize(a.size)+') <div class="progress" style="width: 0%;"></div></div></div>')}),a.refresh(),a.start()}),e.bind("UploadProgress",function(a,e){l("#"+e.id+" .progress").width(.15*e.percent+"%"),l("#"+e.id+" span").html(plupload.formatSize(parseInt(e.size*e.percent/100)))}),e.bind(" ChunkUploaded",function(a,e,t){console.log("Chunk Uploaded:"),console.log(t),_(t,a,e)&&console.log("chunk error")}),e.bind("Error",function(a,e){console.log("PlUpload Error:"),console.log(e);var t="error-item-"+e.file.id;l("#"+t).length||l("#filelist").append('<div class="error-div error" id="'+t+'" ><strong>'+e.file.name+" has failed to upload due to error:&nbsp;</strong> <span>"+e.message+"</span> </div>")}),e.bind("FileUploaded",function(a,e,t){console.log("File Uploaded"),console.log(t),_(t,a,e)?console.log("uploaded error"):(console.log("uploaded success"),l("#"+e.id+" .progress").css("background-color","green"),l("#import-uploads").show())}))}catch(a){console.log(a)}function u(){l(".viewloglink").on("click",function(){var a=l(this).attr("href");return l("#backup_name").val(a),l("#viewlog").trigger("submit"),!1})}function r(){l(".downloadbackuplink").on("click",function(){var a=l(this).attr("href");return l("#backup_file").val(a),l(this).append('<i class="fas fa-check"></i>'),l(this).css({color:"green"}),l("#download_backup").trigger("submit"),!1})}function c(a,e,t){var i="Error-Invalid response from server:  ";e&&(i+=e+"\n"),t&&(i+=t+"\n"),i+="\nResponse: \n\n"+JSON.stringify(a),alert(i)}function s(){var a={action:k("restore_status_reader"),job_id:i};l.post(ajaxurl,a,function(a){l(a).each(function(){var a="."+l(this).attr("class"),e="."+l(this).attr("class")+"-icon";0==l(this).html()&&(l(a).find(".status").hide(),l(a).find(".status-icon").hide()),1==l(this).html()&&(l(e).css("visibility","visible"),l(a).find(".status").fadeOut(200),l(a).find(".status-icon").fadeIn(1500)),2==l(this).html()&&(l(a).find(".status-icon").fadeOut(200),l(a).find(".status").fadeIn(1500)),-1==l(this).html()&&(l(a).find(".status-icon").fadeOut(200),l(a).find(".fail").fadeIn(1500),l(a).find(".isa_error").fadeIn(1500),clearInterval(window.intervalDefine)),-2==l(this).html()&&l(a).find(".isa_warning").fadeIn(1500),99==l(this).html()&&(l(a).find(".isa_success").fadeIn(1500),clearInterval(window.intervalDefine))})})}function o(){var a={action:k("backup_status_reader"),job_id:i};l.post(ajaxurl,a,function(a){if(b)return clearInterval(window.intervalDefine),l(".status-icon").fadeOut(200),l("#backup-button").prop("disabled",!1),l("#cancel-button").addClass("button-hidden").fadeOut(200),l("#backup-button").removeClass("button-hidden").fadeIn(200),l(".backup-cancelled").fadeIn(200),!1;l(a).each(function(){var a="."+l(this).attr("class"),e="."+l(this).attr("class")+"-icon";0==l(this).html()&&(l(a).find(".status").hide(),l(a).find(".status-icon").hide()),1==l(this).html()&&(l(e).css("visibility","visible"),l(a).find(".status").fadeOut(200),l(a).find(".status-icon").fadeIn(1500)),2==l(this).html()&&(l(a).find(".status-icon").fadeOut(200),l(a).find(".status").fadeIn(1500)),-1==l(this).html()&&(l(a).find(".status-icon").fadeOut(200),l(a).find(".fail").fadeIn(1500),clearInterval(window.intervalDefine),n()),-2==l(this).html()&&(l(a).find(".status-icon").fadeOut(200),l(a).find(".wpbackitup-warning").fadeIn(1500)),99==l(this).html()&&(l(a).find(".status-icon").fadeOut(200),l(a).find(".status").fadeIn(1500),clearInterval(window.intervalDefine),n())})})}l(".logs_backup").on("click",function(){var a=l(this).attr("href");return l("#backup_file").val(a),l("#download_logs").val(),l("#download_backup").trigger("submit"),!1}),l("#scheduled-backups-accordian").on("click",function(){scheduled_backups=l("#scheduled-backups"),scheduled_backups_button=l("#scheduled-backups-accordian"),l(this).is(".fa-angle-double-down")?(scheduled_backups.fadeIn("slow"),scheduled_backups_button.toggleClass("fa-angle-double-down",!1),scheduled_backups_button.toggleClass("fa-angle-double-up",!0)):(scheduled_backups_button.toggleClass("fa-angle-double-down",!0),scheduled_backups_button.toggleClass("fa-angle-double-up",!1),scheduled_backups.fadeOut("slow"))}),l("#upload-backups-accordian").on("click",function(){upload_backups=l("#wpbackitup-plupload-modal"),upload_backups_button=l("#upload-backups-accordian"),l(this).is(".fa-angle-double-down")?(upload_backups.fadeIn("slow"),upload_backups_button.toggleClass("fa-angle-double-down",!1),upload_backups_button.toggleClass("fa-angle-double-up",!0)):(upload_backups_button.toggleClass("fa-angle-double-down",!0),upload_backups_button.toggleClass("fa-angle-double-up",!1),upload_backups.fadeOut("slow"))}),l("#wpbackitup-zip").on("change",function(){var a=this.files[0].size,e=l("#maxfilesize").val();"undefined"!=a&&"undefined"!=e&&""!=a&&""!=e&&e<a&&(alert(wpbackitup_local.upload_file_size_exceed),l("#wpbackitup-zip").val(""))}),l("#import-uploads").on("click",function(){setTimeout(function(){window.location.reload()},100)}),l(document.body).on("click",".thickbox",function(){if(!l(this).parents(".wpbiu-restore-item").length){var a=l(this).data("jobid");console.log(a),function(e,a){k("backup_zip_filelist");var t=a.replace(/[^A-Za-z0-9\-]/g,""),s=0,o="",n='<div id="'+t+'">            <h2>'+wpbackitup_local.bl_backup_set+"&nbsp; <em>"+a+'</em></h2>            <div class="wpbiu-notes">            <textarea class="backupnotes" id="wpbiu-note-box" placeholder="'+wpbackitup_local.bl_note_placeholder+'"></textarea>            <button id="wpbiu-note-btn" class="button-primary">'+wpbackitup_local.bl_note_save+'</button><span id="wpbiu-note-response">'+wpbackitup_local.bl_note_saved_success+"</span></div>            <p>"+wpbackitup_local.bl_backup_download+'</p>            <table class="widefat" id="datatable">              <tbody>';l.ajax({url:ajaxurl,type:"POST",data:{action:k("backup_zip_filelist"),job_id:e},dataType:"json"}).done(function(a){a.data?(l.each(a.data,function(){var a=l(this)[0].name.split(/[\/]+/).pop(),e=l(this)[0].size,t=l(this)[0].file_exists;if(console.log(a,e),-1<a.indexOf("-backupset-"))o='<p><a class="downloadbackuplink" href="'+a+'"><i class="fas fa-cloud-download-alt fa-2x"></i> <strong>'+wpbackitup_local.bl_backup_download_single+"</strong></a>                                          <br><em>"+wpbackitup_local.bl_please_note+e+wpbackitup_local.bl_may_timeout+"</em></p>";else{var i="";++s%2!=0&&(i="alternate"),n+='<tr class="'+i+'" id="row'+s+'">',n+=t?'<td><a class="downloadbackuplink" href="'+a+'">'+a+"</a></td>":"<td>"+a+"</td>",n+="<td>"+e+"</td>                         </tr>"}}),n+=o+"</tbody></table></div>",l("#TB_ajaxContent").html(n),r(),l.ajax({url:ajaxurl,type:"post",data:{action:k("backup_get_note"),job_id:e},success:function(a){l("#wpbiu-note-box").val(a.data)}}),l("#wpbiu-note-btn").on("click",function(){var a=l("#wpbiu-note-box").val();l.ajax({url:ajaxurl,type:"POST",data:{action:k("backup_add_note"),job_id:e,note:a},dataType:"json"}).done(function(a){l("#wpbiu-note-response").fadeIn()})}),l("#wpbiu-note-box").on("focus",function(){l("#wpbiu-note-response").hide()})):c(a,null,null)}).fail(function(a,e,t){c(a,e,t)})}(a,this.name)}}),l(document.body).on("click",".thickbox",function(){var e=l(this).data("jobid"),a=l(this).attr("name");if(l(this).parents(".wpbiu-restore-item").length){var t="<h2>"+wpbackitup_local.bl_backup_set+"&nbsp;<em>"+a+'</em></h2>              <div class="wpbiu-notes">                 <textarea class="backupnotes" id="wpbiu-restore-note-box" placeholder="'+wpbackitup_local.bl_note_placeholder+'"></textarea>                 <button id="wpbiu-restore-note-btn" class="button-primary">'+wpbackitup_local.bl_note_save+'</button>                 <span id="wpbiu-restore-note-response">'+wpbackitup_local.bl_note_saved_success+"</span>               </div>";l("#wpbiu-restore-note").html(t),l("#wpbiu-restore-note-response").hide(),l.ajax({url:ajaxurl,type:"post",data:{action:k("backup_get_note"),job_id:e},success:function(a){l("#wpbiu-restore-note-box").val(a.data)}}),l("#wpbiu-restore-note-btn").on("click",function(){var a=l("#wpbiu-restore-note-box").val();l.ajax({url:ajaxurl,type:"POST",data:{action:k("backup_add_note"),job_id:e,note:a},dataType:"json"}).done(function(a){l("#wpbiu-restore-note-response").fadeIn()})})}l("#wpbiu-restore-note-box").on("focus",function(){l("#wpbiu-restore-note-response").hide()})});var p=!1;function n(){l.ajax({url:ajaxurl,type:"POST",data:{action:k("backup_response_reader")},dataType:"json"}).always(function(a,e,t){if(console.log("Backup Response:"+JSON.stringify(a)),void 0!==a.backupStatus&&void 0!==a.backupMessage){if(console.log("JSON Backup Status:"+a.backupStatus),console.log("JSON Backup Message:"+a.backupMessage),p)return;switch(p=!0,a.backupStatus){case"success":if(console.log("JSON success response received."),l(".status-icon").fadeOut(200),l("#backup-button").prop("disabled",!1),l("#cancel-button").addClass("button-hidden").fadeOut(200),l("#backup-button").removeClass("button-hidden").fadeIn(200),l(".isa_success").show,l(".backup-success").fadeIn(1500),function(a){void 0!==a&&(WPBNewBackupData=a,l("#nofiles")&&l("#nofiles").remove(),u(),r())}(a),void 0!==a.backupWarnings){var i=l(".backup-warning");a.backupWarnings.forEach(function(a){var e=a.warningMessage;i.append('<li class="isa_warning">'+wpbackitup_local.warning+": "+e+"</li>")}),i.fadeIn(1500)}break;case"error":console.log("JSON error response received.");var s=wpbackitup_local.unexpected_err;void 0!==a.backupMessage&&(s=a.backupMessage);var o=wpbackitup_local.error+": &nbsp;"+s,n=l(".backup-error");n.html(o),n.addClass("isa_error"),n.fadeIn(1500),l(".status-icon").fadeOut(200),l("#backup-button").prop("disabled",!1),l("#cancel-button").addClass("button-hidden").fadeOut(200),l("#backup-button").removeClass("button-hidden").fadeIn(200);break;default:console.log("Unexpected JSON response status received.");s=wpbackitup_local.unexpected_err2;void 0!==a.backupMessage&&(s=a.backupMessage);o=wpbackitup_local.error+"(JS998) : &nbsp;"+s;(c=l(".backup-error")).html(o),c.addClass("isa_error"),c.fadeIn(1500),l(".status-icon").fadeOut(200),l("#backup-button").prop("disabled",!1),l("#cancel-button").addClass("button-hidden").fadeOut(200),l("#backup-button").removeClass("button-hidden").fadeIn(200)}}else{var c;console.log("NON JSON response received."),console.log("Backup Response:"+t),o=wpbackitup_local.unexpected_err3+": &nbsp;",o+="</br>"+wpbackitup_local.response+": &nbsp;"+JSON.stringify(a),o+="</br>"+wpbackitup_local.status+": &nbsp;"+e,o+="</br>"+wpbackitup_local.error+": &nbsp;"+JSON.stringify(t),l(".backup-status").hide(),(c=l(".backup-error")).html(o),c.addClass("isa_error"),c.show(),l(".status-icon").fadeOut(200)}})}l("#wp-backitup-notification-widget-close").on("click",function(){notification_bar=l("#wp-backitup-notification-widget"),notification_bar.fadeOut("slow"),l.ajax({url:ajaxurl,type:"POST",data:{action:k("delete_transient")},dataType:"json"}).always(function(a,e,t){!1!==a&&(notification_bar.removeClass(),notification_bar.addClass("notice"),notification_bar.addClass("notice-"+a.message_type),l("#wp-backitup-notification-widget-message p").html(a.message),notification_bar.hide().fadeIn("slow"))})}),l("#wp-backitup-notification-close").on("click",function(){notification_bar=l("#wp-backitup-notification-parent"),notification_bar.fadeOut("slow")}),l("#wp-backitup-save_schedule_form").on("submit",function(){var a=new FormData;a.append("action",k("update-schedule")),a.append("_wpnonce",l("#wp-backitup_nonce-update-schedule").val()),a.append("_wp_http_referer",l("[name='_wp_http_referer']").val());var e=[];return l.each(l("input[name='dow']:checked"),function(){e.push(l(this).val())}),a.append("days_selected",e),jQuery.ajax({url:ajaxurl,type:"POST",cache:!1,contentType:!1,processData:!1,dataType:"json",data:a,success:function(a,e,t){switch(response=a.message,console.log("Success:"+response),response){case"success":!function(a){notification_bar_message=l("#wp-backitup-notification-message"),notification_bar_message.html("<p>"+a+"</p>"),notification_bar=l("#wp-backitup-notification-parent"),notification_bar.toggleClass("error",!1),notification_bar.toggleClass("updated",!0),notification_bar.show(),l("html, body").animate({scrollTop:0},"slow")}(wpbackitup_local.scheduled_saved);break;case"error":!function(a){notification_bar_message=l("#wp-backitup-notification-message"),notification_bar_message.html("<p>"+a+"</p>"),notification_bar=l("#wp-backitup-notification-parent"),notification_bar.toggleClass("updated",!1),notification_bar.toggleClass("error",!0),notification_bar.show(),l("html, body").animate({scrollTop:0},"slow")}(wpbackitup_local.scheduled_not_saved)}},error:function(a,e,t){console.log("Error."+e+":"+t)},complete:function(a,e){console.log("Complete")}}),!1});var d=null;l(".backup-button").on("click",function(a){a.preventDefault(),b=!1,l("#backup-button").attr("disabled","disabled"),l("#backup-button").addClass("button-hidden"),l("#cancel-button").removeClass("button-hidden"),l("#cancel-button").prop("disabled",!1),l("#cancel-button").fadeIn(200),(d=l.ajax({url:ajaxurl,type:"POST",data:{action:k("backup")},cache:!1,dataType:"json",beforeSend:function(a,e){console.log("BeforeSend:Nothing to report."),l(".backup-icon").css("visibility","visible"),l(".backup-icon").show(),l(".backup-success").hide(),l(".default-status").hide(),l(".backup-error").hide(),l(".backup-cancelled").hide(),l("ul.backup-status").children().children().hide(),l(".backup-errors").children().children().hide(),l(".backup-success").children().children().hide(),l(".backup-status").show(),p=!1,window.intervalDefine=setInterval(o,5e3)}})).always(function(a,e,t){console.log("Backup Button Click - Always"),console.log(a.message),void 0!==a.job_id?(i=a.job_id,console.log("Job_Id:"+a.job_id)):console.log("No Job Id found:"+a)})}),l(".get-backup-schedule-button").on("click",function(a){a.preventDefault();var e="get_backup_schedule",t=wpbackitup_local[e];d=l.ajax({url:ajaxurl,type:"POST",data:{action:"wp-backitup_"+e,security:t},cache:!1,dataType:"json",beforeSend:function(a,e){console.log("BeforeSend:Nothing to report.")}})}),l(".set-backup-schedule-button").on("click",function(a){a.preventDefault();var e="set_backup_schedule",t=wpbackitup_local[e];d=l.ajax({url:ajaxurl,type:"POST",data:{action:"wp-backitup_"+e,security:t,frequency:"daily",start_time:"16:30",days:"M",enabled:!0},cache:!1,dataType:"json",beforeSend:function(a,e){console.log("BeforeSend:Nothing to report.")}})});var b=!1;function _(e,t,i){if("200"!=e.status)return alert("Unknown server response status: "+e.code),console.log(e),f(t,i,999,e.response),!0;try{return response_json=jQuery.parseJSON(e.response),!!response_json.error&&(f(t,i,100,response_json.error),!0)}catch(a){return console.log("Unexpected JSON Error"+a),f(t,i,998,e.response),!0}}function f(a,e,t,i){e.status=plupload.FAILED,a.trigger("Error",{code:t,message:i,file:e}),l("#media-item-"+e.id).hide()}function k(a){return t+"_"+a}l(".cancel-button").on("click",function(a){a.preventDefault(),l("#cancel-button").attr("disabled","disabled"),null!=d&&(d.abort(),d=null),(d=l.ajax({url:ajaxurl,type:"POST",data:{action:k("cancel_backup"),job_id:i},cache:!1,dataType:"json",beforeSend:function(a,e){console.log("BeforeSend:Nothing to report."),l(".backup-icon").css("visibility","visible"),l(".backup-icon").show(),l(".backup-status").show(),p=!1,clearInterval(window.intervalDefine),window.intervalDefine=setInterval(o,5e3)}})).always(function(a,e,t){console.log("Cancel Button Click - Always"),console.log(a),void 0!==a.success&&1==a.success?console.log("Job Cancelled successfully"):console.log("Job was not cancelled successfully"),b=!0})}),l("#datatable").on("click","a.restoreRow",function(a){if(a.preventDefault(),confirm(wpbackitup_local.confirm_restore)){var e=this.title;this.id.replace("restoreRow","row");userid=l("input[name=user_id]").val(),l.ajax({url:ajaxurl,type:"post",data:{action:k("restore"),selected_file:e,user_id:userid},cache:!1,dataType:"json",beforeSend:function(){console.log("BeforeSend:Nothing to report."),l(".restore-icon").css("visibility","visible"),l(".default-status, .upload-status").hide(),l("ul.restore-status").children().children().hide(),l(".restore-errors").children().children().hide(),l(".restore-success").children().children().hide(),l(".restore-status, .restore-errors, .restore-success").show(),l(".preparing-icon").css("visibility","visible"),l(".preparing").find(".status-icon").fadeIn(1500),window.intervalDefine=setInterval(s,5e3)}}).always(function(a,e,t){void 0!==a.job_id?(i=a.job_id,console.log("Job_Id:"+a.job_id)):console.log("No Job Id found:"+a)})}}),l("#datatable").on("click","a.deleteRow",function(a){if(a.preventDefault(),confirm(wpbackitup_local.sure)){var e=this.title,t=l(this).data("id"),i=this.id.replace("deleteRow","row");l.ajax({url:ajaxurl,type:"post",data:{action:k("delete_file"),filed:e,post_id:t},success:function(a){0==a.search("deleted")?l("#"+i).remove():alert(wpbackitup_local.file_not_del)}})}})}(jQuery),function(t){"use strict";function i(a){return"wp-backitup_"+a}t(window).on("load",function(){if(document.querySelector("#wpbackitup-core-settings")){Vue.use(VueTabs);var e=new Vue({el:"#wpbackitup-core-settings",data:{loading:!1,updated:!1,emailsArray:[],errorMessages:{},backup_retained_number:3,logging:!1,single_file_db:!1,single_file_backupset:!1,rversion_compare:!1,remove_supporting_zip_files:!1,backup_plugins_filter:[],backup_themes_filter:[],backup_uploads_filter:[],backup_others_filter:[],dbFilterOptions:[],db_filters:[],allow_usage_tracking:!1,backup_dbtables_batch_size:1e4,backup_sql_merge_batch_size:1e4,backup_sql_batch_size:1e4,backup_plugins_batch_size:5e3,backup_themes_batch_size:5e3,backup_uploads_batch_size:500,backup_others_batch_size:500,backup_zip_max_size:524288e3,backup_max_timeout:120,delete_all:!1,safe_sync:!1,beta_updates:!1},computed:{dbFilterHasSearch:function(){return 0==this.dbFilterOptions.length},dbFilterPlaceholder:function(){return 0<this.dbFilterOptions.length?wpbackitup_local.settings_select_database_table_to_filter:wpbackitup_local.settings_no_database_table_to_filter}},methods:{handleEmailInput:function(a){},handleTagsInput:function(a){},setSettings:function(){var a={data:{notification_email:this.emailsArray.join(","),backup_retained_number:this.backup_retained_number,logging:this.logging,single_file_db:this.single_file_db,single_file_backupset:this.single_file_backupset,rversion_compare:this.rversion_compare,remove_supporting_zip_files:this.remove_supporting_zip_files,backup_plugins_filter:this.backup_plugins_filter.join(","),backup_themes_filter:this.backup_themes_filter.join(","),backup_uploads_filter:this.backup_uploads_filter.join(","),backup_others_filter:this.backup_others_filter.join(","),backup_dbtables_filter_list:this.db_filters.map(function(a){return a.value}).join(","),backup_dbtables_batch_size:this.backup_dbtables_batch_size,backup_sql_merge_batch_size:this.backup_sql_merge_batch_size,backup_sql_batch_size:this.backup_sql_batch_size,backup_plugins_batch_size:this.backup_plugins_batch_size,backup_themes_batch_size:this.backup_themes_batch_size,backup_uploads_batch_size:this.backup_uploads_batch_size,backup_others_batch_size:this.backup_others_batch_size,backup_zip_max_size:this.backup_zip_max_size,backup_max_timeout:this.backup_max_timeout,delete_all:this.delete_all,safe_sync:this.safe_sync,beta_updates:this.beta_updates,allow_usage_tracking:this.allow_usage_tracking}};console.log(a),function(a,e){return(e=e||{}).action=i(a),e.security=t("#wpbackitup-core-ajax-nonce").val(),t.ajax({url:ajaxurl,type:"POST",data:e,dataType:"json"})}("set_settings",a).then(function(a){a.success?(e.updated=!0,e.errorMessages={},swal(wpbackitup_local.settings_save_awesome,wpbackitup_local.settings_save_success_message,"success")):(e.errorMessages=a.data,swal(wpbackitup_local.settings_save_oops,wpbackitup_local.settings_save_error_message,"error"))})},getSettings:function(){this.loading=!0,function(a){return t.ajax({url:ajaxurl,type:"GET",data:{action:i(a)},dataType:"json"})}("get_settings").then(function(t){e.loading=!1,t.success&&(console.log(t),e.emailsArray=t.data.notification_email.split(",").filter(Boolean),e.backup_retained_number=t.data.backup_retained_number,e.logging="1"===t.data.logging,e.single_file_db="1"===t.data.single_file_db,e.rversion_compare="1"===t.data.rversion_compare,e.single_file_backupset="1"===t.data.single_file_backupset,e.remove_supporting_zip_files="1"===t.data.remove_supporting_zip_files,e.backup_plugins_filter=t.data.backup_plugins_filter.split(",").filter(Boolean),e.backup_themes_filter=t.data.backup_themes_filter.split(",").filter(Boolean),e.backup_uploads_filter=t.data.backup_uploads_filter.split(",").filter(Boolean),e.backup_others_filter=t.data.backup_others_filter.split(",").filter(Boolean),e.db_filters=t.data.backup_dbtables_filter_list.split(",").filter(Boolean).map(function(a){return{label:a,value:a}}),e.dbFilterOptions=Object.keys(t.data.backup_dbtables_filterable).map(function(a){var e=t.data.backup_dbtables_filterable[a];return{label:e,value:e}}),e.allow_usage_tracking=t.data.allow_usage_tracking,e.backup_dbtables_batch_size=t.data.backup_dbtables_batch_size,e.backup_sql_merge_batch_size=t.data.backup_sql_merge_batch_size,e.backup_sql_batch_size=t.data.backup_sql_batch_size,e.backup_plugins_batch_size=t.data.backup_plugins_batch_size,e.backup_themes_batch_size=t.data.backup_themes_batch_size,e.backup_uploads_batch_size=t.data.backup_uploads_batch_size,e.backup_others_batch_size=t.data.backup_others_batch_size,e.backup_zip_max_size=t.data.backup_zip_max_size,e.backup_max_timeout=t.data.backup_max_timeout,e.delete_all="1"===t.data.delete_all,e.safe_sync="1"===t.data.safe_sync,e.beta_updates="1"===t.data.beta_updates)})}},created:function(){this.getSettings()}})}})}(jQuery);